{% extends "Base.html" %}
{% load bootstrap_toolkit %}
{% load staticfiles %}

{% block scripts_and_styles %}
<script src="{% static 'SmoUtil.js' %}"></script>
<script type="text/javascript" src="http://dygraphs.com/dygraph-dev.js"></script>
<script type="text/javascript" src="http://cavorite.com/labs/js/dygraphs-export/dygraph-extra.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script>
google.load('visualization', '1.0', {'packages':["corechart", "table", "controls"]});
angular.module('FluidPropsCalculator', ['ui.bootstrap', 'smo'])
	.config(['$httpProvider', function($httpProvider) {
	    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
	    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
	}])
	.controller('FluidPropsController', [ '$scope', '$http', 'ModelCommunicator', function($scope, $http, ModelCommunicator) {
		//Fluid Properties
		$scope.FluidProperties = {};
		
		// Fluids info		
		$scope.FluidInfo = {
//			inputCommunicator: new ModelCommunicator()
		};
		
//		$scope.FluidInfo.inputCommunicator.fetchData(
//			'getFluidInfo', {}, function(comm){
//				$scope.FluidInfo.selectedFluid = comm.data[0];
//			});
		
		// Saturation properties		
		$scope.SaturationData = {
//			inputCommunicator: new ModelCommunicator(),		
		};
			
//		$scope.SaturationData.inputCommunicator.fetchData(
//			'getFluidList', {}, function(comm){
//				$scope.SaturationData.selectedFluid = comm.data[0][0];
//			});
		
//		$scope.fetchSaturationData = function (){
//			$scope.SaturationData.resultViewCommunicator.fetchData(
//					'compute', {fluidName : $scope.SaturationData.selectedFluid});	
//		}
}])
</script>
{% endblock %}


{% block pills %}
	<li class="active" role="presentation"><a id="calcTab" data-target="#calculator" role="tab" data-toggle="tab">Calculator</a></li>
	<li role="presentation"> <a id="fluidsTab" data-target="#fluids" role="tab" data-toggle="tab">Fluid info</a></li>
	<li role="presentation"> <a id="saturationTab" data-target="#saturation" role="tab" data-toggle="tab">Saturation</a></li>
	<li role="presentation"> <a id="docTab" data-target="#doc" role="tab" data-toggle="tab">Doc</a></li>
{% endblock %}

{% block content %}
<div ng-app="FluidPropsCalculator" ng-controller="FluidPropsController">
	<div class="tab-content">
		<div class="tab-pane active page-container" id="calculator">		
			<h1 class="title">Fluid properties calculator</h1>
			<div class="title-figure">
				<img height="150" style="width: 250px" src="{% static 'ThermoFluids/StateDiagram3D.svg' %}"></img>
			</div>		
{% verbatim %}		
			<div class="tab-content">
				<div class="section"> 
					<div smo-model-view="inputView" model-name="FluidProperties" view-type="input" auto-fetch="true" record-Id=""></div>
				</div>
				<div class="section"> 
					<div smo-model-view="resultView" model-name="FluidProperties" view-type="output" record-Id=""></div>
				</div>
			</div>
{% endverbatim %}
		</div>
		<div class="tab-pane" id="doc">
			<div class="docview">
				{% include 'documentation/html/FluidPropertiesDoc.html' %}
			</div>
		</div>
		<div class="tab-pane page-container" id="fluids">
{% verbatim %}	
			<h1 class="title">Fluid information</h1>
			<div class="section"> 
				<div smo-model-view="inputView" model-name="FluidInfo" view-type="input" auto-fetch="true" record-Id=""></div>
			</div>					
			<div class="section">	
				<div smo-model-view="resultView" model-name="FluidInfo" view-type="output" record-Id=""></div>
			</div>	
			<div class="section">
				<h1>Literature References</h1>				
<!--				<div ng-repeat="pair in FluidInfo.selectedFluid.references" ng-show="pair[1]"> -->
<!--					<span class="label-text">{{pair[0]}}:</span> {{pair[1].author}}, <span class="italic-text">{{pair[1].title}}</span> -->
<!--				</div>	-->		
			</div>
		</div>
{% endverbatim %}
		<div class="tab-pane page-container" id="saturation">
			<h1 class="title">Saturation</h1>
			<div class="section"> 
				<div smo-model-view="inputView" model-name="SaturationData" view-type="input" auto-fetch="true" record-Id=""></div>
			</div>					
			<div class="section">	
				<div smo-model-view="resultView" model-name="SaturationData" view-type="output" record-Id=""></div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
