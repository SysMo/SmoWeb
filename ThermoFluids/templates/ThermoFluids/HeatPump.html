{% extends "Base.html" %}
{% load bootstrap_toolkit %}
{% load staticfiles %}

{% block scripts_and_styles %}
<script src="{% static 'SmoUtil.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'css/SmoInputOutputView.css' %}">
<script>
angular.module('HeatPump', ['ui.bootstrap', 'smo'])
	.config(['$httpProvider', function($httpProvider) {
	    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
	    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
	}])
	.controller('HeatPumpController', 
		[ '$scope', 'ModelCommunicator', function($scope, ModelCommunicator) {
		$scope.heatPump = {
			inputCommunicator: new ModelCommunicator(),
			resultsCommunicator: new ModelCommunicator()
		};
		$scope.heatPump.inputCommunicator.fetchData(
			'getHeatPumpInputs', {});
		
		$scope.compute = function() {
			$scope.heatPump.resultsCommunicator.fetchData(
				'computeHeatPump', $scope.heatPump.inputCommunicator.data.values);
		}
		
	}]);
</script>
{% endblock %}

{% block pills %}
	<li class="active" role="presentation"><a id="calcTab" data-target="#calculator" role="tab" data-toggle="tab">Calculator</a></li>
	<li role="presentation"><a id="docTab" data-target="#doc" role="tab" data-toggle="tab">Doc</a></li>
{% endblock %}

{% block content %}
<div ng-app="HeatPump" ng-controller="HeatPumpController">
	<div class="tab-content">
		<div class="tab-pane active page-container" id="calculator">
			<h1 class="title">Heat pump</h1>
			<div class="title-figure">
				<img src="{% static 'ThermoFluids/HeatPump.svg' %}"></img>
			</div>			
			<div class="section">
				<div smo-model-view="heatPumpInputs" view-type="input" communicator="heatPump.inputCommunicator"></div>
			</div>
			<div class="section"> 		
				<div ng-show="heatPump.inputCommunicator.dataReceived"><button ng-disabled="!heatPump.inputCommunicator.fieldsValid" 
					 class="btn btn-default" ng-click="compute()">Compute</button>
				</div>
			</div>
			<div class="section"> 
				<div smo-model-view="heatPumpResults" view-type="output" communicator="heatPump.resultsCommunicator"></div>
			</div>
		</div>
		<div class="tab-pane" id="doc">
			Documentation
		</div>
	</div>
</div>

{% endblock %}

