{% extends "Base.html" %}
{% load bootstrap_toolkit %}
{% load staticfiles %}

{% block scripts_and_styles %}
<script src="{% static 'SmoUtil.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'css/SmoInputOutputView.css' %}">
<script>
angular.module('FlowResistance', ['ui.bootstrap', 'smo'])
	.config(['$httpProvider', function($httpProvider) {
	    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
	    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
	}])
	.controller('FlowResistanceController', 
		[ '$scope', function($scope) {
 		$scope.inputs = { autoFetch : true, dataUrl: '/ThermoFluids/FlowResistance/', action: 'getInputs'};
 		$scope.outputs = { dataUrl: '/ThermoFluids/FlowResistance/', action: 'compute'};
		$scope.compute = function() {
			$scope.outputs.fetchData($scope.inputs.data.values);
		}
		
	}]);
</script>
{% endblock %}

{% block pills %}
	<li class="active" role="presentation"><a id="calcTab" data-target="#calculator" role="tab" data-toggle="tab">Calculator</a></li>
	<li role="presentation"><a id="docTab" data-target="#doc" role="tab" data-toggle="tab">Doc</a></li>
{% endblock %}

{% block content %}
<div ng-app="FlowResistance" ng-controller="FlowResistanceController">
	<div class="tab-content">
		<div class="tab-pane active" id="calculator">
			<h1>Pressure losses in pipe flow</h1>
			<div class="contentSVG">
				<object data="{% static 'ThermoFluids/StraightPipe.svg' %}" type="image/svg+xml"></object>
			</div>		
			<div ng-form name="myForm">
				<div smo-input-view="inputs"></div>
			</div>		
			<div ng-show="inputs.inputsObtained"><button ng-disabled="!myForm.$valid" class="btn btn-default" ng-click="compute()">Compute</button></div>		
			<br>
			<div smo-output-view="outputs"></div>
		</div>
		<div class="tab-pane" id="doc">
			<div style='width: 1200px; margin-left: auto; margin-right: auto; background-color:white; border: solid black 1px; padding: 10px;'>
				{% include 'markup/html/FlowResistance.html' %}
			</div>
		</div>
	</div>
</div>
{% endblock %}

